/*
 * m2_mutex.c
 *
 *  Created on: Apr 24, 2022
 *      Author: zeyne
 */
#include <stdio.h>
#include "xil_printf.h"
#include "xmutex.h"
#include "xparameters.h"
#include "xstatus.h"


int main()
{
	XMutex Mutex;
	XMutex_Config *MTConfigPtr;
	int cal=0x00;

    MTConfigPtr = XMutex_LookupConfig(XPAR_MUTEX_0_IF_1_DEVICE_ID);
    XMutex_CfgInitialize(&Mutex, MTConfigPtr, MTConfigPtr -> BaseAddress);

    while(1){
    	XMutex_Lock(&Mutex,0);
    	if(cal != 44 ){
    		cal += 2;
    	}
    	else
    		cal = 0;
    	sleep(1);
    	XMutex_Unlock(&Mutex,0);
    	sleep(1);

    }
    return 0;
}


